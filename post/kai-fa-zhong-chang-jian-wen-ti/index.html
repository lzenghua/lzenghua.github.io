<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>李增华博客</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="description" content="向昨天要经验，向今天要结果，向明天要动力"/>
<meta name="keywords" content="向昨天要经验，向今天要结果，向明天要动力"/>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="https://lzenghua.github.io/favicon.ico">

<link rel="stylesheet" href="https://lzenghua.github.io/styles/main.css">

<!-- Modernizr JS -->
<script src="https://lzenghua.github.io/media/scripts/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
<scripts src="https://lzenghua.github.io/media/scripts/respond.min.js"></scripts>
<![endif]-->

<!-- Comment -->



<!-- katex -->
<!--<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet">-->

<link href="https://cdn.bootcss.com/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">



</head>
<body>
    <div id="fh5co-offcanvas">
    <a href="#!" class="fh5co-close-offcanvas js-fh5co-close-offcanvas">
        <span><i class="icon-cross3"></i> <span>Close</span></span>
    </a>
    <div class="fh5co-bio">
        <figure>
            <img src="https://lzenghua.github.io/images/avatar.png" alt="李增华博客"
                 class="img-responsive">
        </figure>
        <a href="https://lzenghua.github.io/post/about/"><h3 class="heading">ABOUT ME</h3></a>
        <h2>李增华博客</h2>
        <p>向昨天要经验，向今天要结果，向明天要动力</p>
        <ul class="fh5co-social">
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
        </ul>
    </div>

    <div class="fh5co-menu">

        <!-- 标签 -->
        <div class="fh5co-box">
            <a href="https://lzenghua.github.io/tags/"><h3 class="heading">👉标签</h3></a>
            <ul>
                
                    <li><a href="https://lzenghua.github.io/tag/fEA9jfGay/">JavaScript</a></li>
                
                    <li><a href="https://lzenghua.github.io/tag/JOsanDbSH/">归纳</a></li>
                
                    <li><a href="https://lzenghua.github.io/tag/s8moA1Vin/">兼容</a></li>
                
                    <li><a href="https://lzenghua.github.io/tag/u_z3iiHFM/">SDK</a></li>
                
                    <li><a href="https://lzenghua.github.io/tag/oe4PgmBdo/">css</a></li>
                
                    <li><a href="https://lzenghua.github.io/tag/KadTZlqgI/">vue</a></li>
                
                    <li><a href="https://lzenghua.github.io/tag/LH5kRXU-S/">es6</a></li>
                
                    <li><a href="https://lzenghua.github.io/tag/OBQAc4W8K/">算法</a></li>
                
                    <li><a href="https://lzenghua.github.io/tag/BDbtE0eXu/">架构</a></li>
                
                    <li><a href="https://lzenghua.github.io/tag/a5tZQeTJ-/">小游戏</a></li>
                
            </ul>
        </div>
    </div>
</div>

<header id="fh5co-header">
    <div class="container-fluid">
        <div class="row">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
            <ul class="fh5co-social">
                
                    <li>
                        <a href="/"
                        
                        >
                            首页
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives"
                        
                        >
                            归档
                        </a>
                    </li>
                
                    <li>
                        <a href="https://lzenghua.github.io/tags"
                        
                        >
                            标签
                        </a>
                    </li>
                
                    <li>
                        <a href="https://lzenghua.github.io/post/about"
                        
                        >
                            关于
                        </a>
                    </li>
                
            </ul>
            <div class="col-lg-12 col-md-12 text-center">
                <h1 id="fh5co-logo">
                    <a href="https://lzenghua.github.io">李增华博客 </a>
                </h1>
            </div>
        </div>
    </div>
</header>


    <!--  <a href="#" class="fh5co-post-prev"><span>👈 Prev</span></a>-->
    <!--  <a href="#" class="fh5co-post-next"><span>Next 👉</span></a>-->

    <!-- 等gridea出自定义页面功能再优化一下 -->
    
        <div class="container-fluid">
    <div class="row fh5co-post-entry single-entry">
        <article class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 col-xs-offset-0">
            <figure class="animate-box">
                
                    <img src="https://lzenghua.github.io/post-images/kai-fa-zhong-chang-jian-wen-ti.png" alt="开发中常见问题" class="img-responsive">
                
            </figure>
            <span class="fh5co-meta animate-box">
                
                    <div class="tag-container">
                        
                            <a href="https://lzenghua.github.io/tag/fEA9jfGay/" class="tag">JavaScript, </a>
                        
                            <a href="https://lzenghua.github.io/tag/JOsanDbSH/" class="tag">归纳, </a>
                        
                            <a href="https://lzenghua.github.io/tag/KadTZlqgI/" class="tag">vue, </a>
                        
                    </div>
                
            </span>
            <h2 class="fh5co-article-title animate-box">开发中常见问题</h2>
            <ol class="breadcrumb fh5co-meta fh5co-date animate-box" style="margin-bottom:0; background-color:#f8f9fa">
                <li>2020-09-14</li>
                <li>1612字</li>
                <li>7 min read</li>
            </ol>

            <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-left content-article">
                <div class="row">
                    <div class="col-md-12 animate-box post-content">
                        <p> <h2 id="项目路由出现message-navigating-to-current-location-xxx-is-not-allowed">项目路由出现message: “Navigating to current location (XXX) is not allowed”</h2>
<ul>
<li>出现场景：当多次点击相同路由时</li>
<li>原因：在路由中添加了相同的路由。</li>
<li>解决：重写路由的push方法</li>
</ul>
<pre><code class="language-js">// src/router/index.js
import Vue from &quot;vue&quot;;
import VueRouter from &quot;vue-router&quot;;
import { routes } from &quot;./routerConfig&quot;;

/**
 * 重写路由的push方法
 * 解决：在路由中点击了相同的路由（会报不允许vue导航到当前位置）的错误
 */
const routerPush = VueRouter.prototype.push;
VueRouter.prototype.push = function push(location) {
  return routerPush.call(this, location).catch(error =&gt; error);
};

Vue.use(VueRouter);

const router = new VueRouter({
  routes
});

export default router;
</code></pre>
<hr>
<h2 id="img的src属性绑定问题">img的src属性绑定问题</h2>
<ul>
<li>出现场景：将img的src地址使用data(){return {}}的方式进行属性绑定，会出现图片加载不出来404</li>
<li>原因：
<ul>
<li>分析vuecli的<code>assets</code>和<code>static</code>文件夹的区别：
<ul>
<li><code>assets</code> ：编译时会被 webpack 处理，解析为模块依赖，只支持相对路径</li>
<li><code>static</code> ：编译时不会被 webpack 处理，会直接被复制到最终的打包目录(默认是dist/static)下，这是通过config.js文件中的<code>build.assetsPublic</code>和<code>build.assertsSubDirectory</code>链接来确定的。任何放在static/中文件需要以绝对路径的形式引用：<em>/static[filename]</em></li>
</ul>
</li>
<li>在webpack中会将图片当做模块来用，因为是动态加载的，所以url-loader将无法解析图片地址，然后npm run dev 或者npm run build之后导致路径没有被加工【被webpack解析到的路径都会被解析为*/static/img/[filename].png*，完整地址为<em>localhost:8080/static/img/[filename].png】</em></li>
</ul>
</li>
<li>解决：
<ul>
<li>将图片作为模块加载进去，比如<em>images:[{src:require(‘./1.png’)},{src:require(‘./2.png’)}]</em></li>
<li>将图片放到static目录下，但必须写成绝对路径如<em>images:[{src:’/static/1.png’},{src:’/static/2.png’}]</em></li>
<li>把图片放在cdn上，把网络地址存在imgUrl里，然后直接去展示</li>
</ul>
</li>
</ul>
<hr>
<h2 id="在混合app开发中ios端input触发焦点后键盘抬起不灵敏缓慢">在混合APP开发中，ios端，input触发焦点后，键盘抬起不灵敏/缓慢</h2>
<ul>
<li>出现场景：在SDK打包后，在ios端发现，点击输入框，触发不灵敏，甚至有时候不触发，而且键盘抬起缓慢</li>
<li>原因：是由于<code>fastclick</code>插件引起的</li>
<li>解决：</li>
</ul>
<p>在node_module里找到fastClick文件，然后找到focus方法</p>
<pre><code class="language-js">/**
  * @param {EventTarget|Element} targetElement
  */
FastClick.prototype.focus = function(targetElement) {
    var length;

    // Issue #160: on iOS 7, some input elements (e.g. date datetime month) throw a vague TypeError on setSelectionRange. These elements don't have an integer value for the selectionStart and selectionEnd properties, but unfortunately that can't be used for detection because accessing the properties also throws a TypeError. Just check the type instead. Filed as Apple bug #15122724.
    if (deviceIsIOS &amp;&amp; targetElement.setSelectionRange &amp;&amp; targetElement.type.indexOf('date') !== 0 &amp;&amp; targetElement.type !== 'time' &amp;&amp; targetElement.type !== 'month' &amp;&amp; targetElement.type !== 'email') {
        length = targetElement.value.length;
        targetElement.focus();//加入这一句话就OK了
        targetElement.setSelectionRange(length, length);
    } else {
        targetElement.focus();
    }
};
</code></pre>
<hr>
<h2 id="在项目中使用better-scroll的踩坑记">在项目中使用better-scroll的踩坑记</h2>
<blockquote>
<p>PC端没必要引入better-scroll！旧项目由于考虑要兼容移动端才引入，没想到一堆bug。如果引入，做兼容：在移动端时使用这个插件，而在PC端，调用destory 方法销毁BScroll，使用原生</p>
</blockquote>
<p>####　1. 页面不能点击问题</p>
<ul>
<li>原因：better-scroll 默认会阻止浏览器原生的 click 事件</li>
<li>解决：在创建 BScroll 实例时 传入配置</li>
</ul>
<pre><code class="language-js">const options = {
    click: true,
    taps: true
}
this.scroll = new BScroll(this.$refs.wrapper,options)

</code></pre>
<h4 id="2-在pc端无法响应鼠标滚轮滚动">2. 在PC端，无法响应鼠标滚轮滚动</h4>
<ul>
<li>解决：在配置选项中添加 mouseWheel:true</li>
</ul>
<pre><code class="language-js">const options = {
    click: true,
    bounce: false,
    scrollbar: true,
    preventDefault: false,
    tap: true,
    mouseWheel: true
}
</code></pre>
<h4 id="3-scrollbehavior-与-better-scroll-不兼容">3. scrollBehavior 与 better-scroll 不兼容</h4>
<ul>
<li>出现场景/原因： vue 的 scrollBehavior *可用于配置路由，比如：滚动到锚点；如果这个锚点是在 BScroll 容器中，scrollBehavior * 就会失效</li>
<li>解决：</li>
</ul>
<pre><code class="language-js">mounted() { // 模拟scrollBehavior
    const hash = this.$route.hash;
    setTimeout(() =&gt; { // 虽然父组件先于子组件创建，但是contentScroll是在nextTick中赋值的
        const contentScroll = this.$parent.contentScroll;
        if (contentScroll) {
            if (hash) {
                contentScroll.scrollToElement(hash);
            } else {
                contentScroll.scrollTo(0, 0);
            }
        }
    });
},
</code></pre>
<h4 id="4-点击一次多次触发">4. 点击一次多次触发</h4>
<ul>
<li>场景： 当我们在配置中传入 click:true ，点击 BScroll 容器的元素时，会触发两次甚至多次 click 事件；这个问题在 *iscroll *中也存在</li>
<li>解决：引入 fastclick 插件</li>
</ul>
<h4 id="5-容器需要固定高度">5. 容器需要固定高度</h4>
<ul>
<li>原因：如果高度是百分比，以适应容器父元素的高度变化。但是如果父元素也没有高度呢？大家都知道，父元素没高度时，子元素height: 100%是无效的。我父元素要flex: 1自适应，这也是没有高度的，父元素设置<code>height: 100%</code>也是无效的。</li>
<li>解决：</li>
</ul>
<pre><code class="language-css">position: absolute;
height: 100%;
</code></pre>
<h4 id="6-双层嵌套问题">6. 双层嵌套问题</h4>
<ul>
<li>原因：双层嵌套使用了stopPropagation: true，但是里面的滚动如果滚到底或者滚到顶部，触发不了最外层的滚动。</li>
<li>解决：内层滚动到底或者滚到顶部时，内层调用disable进行禁止，然后外层调用enable启用</li>
</ul>
<hr>
<h2 id="vue-router-如何刷新当前页面">vue-router 如何刷新当前页面</h2>
<p>https://segmentfault.com/a/1190000017007631?utm_source=tag-newest<br>
https://www.jb51.net/article/151984.htm</p>
<hr>
<h2 id="vue加scoped后就无法修改vant的ui组件的样式">vue加scoped后就无法修改vant的UI组件的样式</h2>
<ul>
<li>出现场景：为了让vue样式模块化，不污染全局样式，会在每个页面的style标签上加 scoped; 如果要覆盖掉第三方组件的样式</li>
<li>原因：因为使用 sass 预处理器，所以无法使用<code>&gt;&gt;&gt;</code>提高优先级；因为 sass 对其无法解析</li>
<li>解决：使用<code>/deep/</code>或者<code>::v-deep</code></li>
</ul>
<pre><code class="language-css">.van-tab{
    ::v-deep .van-elipsis{
        font-weight: bold;
    }
}
</code></pre>
<hr>
<h2 id="swiper-手动滑动后自动滑动失效问题">swiper 手动滑动后，自动滑动失效问题</h2>
<ul>
<li>解决： 设置disableOnInteraction</li>
</ul>
<pre><code class="language-js">var mySwiper = new Swiper('.swiper-container', {
    speed: 500,
    loop: true,
    autoplay: {
      disableOnInteraction: false, // 将此属性的值设置为 false
      delay: 2500,
    }
    ...
});
</code></pre>
<hr>
<h2 id="webpack的动态import">webpack的动态import</h2>
<ul>
<li>场景： 在做H5编辑器项目中，动态添加组件中，封装了一个通过name导入组件的方法，出现终端报错：</li>
</ul>
<pre><code>Critical dependency: the request of a dependency is an expression
</code></pre>
<ul>
<li>原因：webpack动态import，是会根据代码里面的给出的路径信息去查找文件的，并且会将所有满足这个路径信息的文件都打成一个chunk，以备后续使用。</li>
<li>解决： 在使用动态import的时候，<em>尽可能使用准确的静态路径，减少变量的影响范围</em>。</li>
</ul>
<blockquote>
<p>这里需要注意，在动态import的时候，路径不能只使用一个变量表示，这样的话，webpack没有办法找到对应的文件。</p>
</blockquote>
<pre><code class="language-js">const importCompByName = name =&gt; {
  let result
  import('@/components/comps/' + name).then(module =&gt; {
    result = module.default
  }).catch(error =&gt; {
    console.log(error.msg)
  })
  return result
}

// 如下为正确姿势
import('./components/'+ ComponentName).then(module =&gt; { ... })

// 如下为错误姿势，会报错
// 下面代码是无效的
const a = './temp';
import(a).then(module =&gt; {
	console.log(module.default);
});
</code></pre>
<p>http://www.imooc.com/article/294778</p>
 </p>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 animate-box">
                        
                            <div class="next-post">
                                <div class="next">下一篇</div>
                                <a href="https://lzenghua.github.io/post/wai-lian-yong-liao-target_blank-tiao-zhuan-cuo-wu-wen-ti/">
                                    <h3 class="post-title">
                                        外链用了 target=&#34;_blank&#34; 跳转错误问题
                                    </h3>
                                </a>
                            </div>
                        
                    </div>
                </div>

                <div class="row">
    <div class="col-md-12 animate-box">
        
    </div>
</div>

            </div>

        </article>
    </div>
</div>

    

    <!-- 返回顶部 -->
    <div class="back-to-top">
    
        <a href="#!" id="tool-toc" class="hidden-xs hidden-sm">
            <i class="fa fa-map"></i>
        </a>
        <br>
    
    <a href="#top" class="hidden-xs hidden-sm"><i class="fa fa-paper-plane"></i></a>
</div>

<div class="post-toc animated fadeInRight hidden-xs hidden-sm" style="display: none;">
    <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E9%A1%B9%E7%9B%AE%E8%B7%AF%E7%94%B1%E5%87%BA%E7%8E%B0message-navigating-to-current-location-xxx-is-not-allowed">项目路由出现message: “Navigating to current location (XXX) is not allowed”</a></li>
<li><a href="#img%E7%9A%84src%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A%E9%97%AE%E9%A2%98">img的src属性绑定问题</a></li>
<li><a href="#%E5%9C%A8%E6%B7%B7%E5%90%88app%E5%BC%80%E5%8F%91%E4%B8%ADios%E7%AB%AFinput%E8%A7%A6%E5%8F%91%E7%84%A6%E7%82%B9%E5%90%8E%E9%94%AE%E7%9B%98%E6%8A%AC%E8%B5%B7%E4%B8%8D%E7%81%B5%E6%95%8F%E7%BC%93%E6%85%A2">在混合APP开发中，ios端，input触发焦点后，键盘抬起不灵敏/缓慢</a></li>
<li><a href="#%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8better-scroll%E7%9A%84%E8%B8%A9%E5%9D%91%E8%AE%B0">在项目中使用better-scroll的踩坑记</a><br>
*
<ul>
<li><a href="#2-%E5%9C%A8pc%E7%AB%AF%E6%97%A0%E6%B3%95%E5%93%8D%E5%BA%94%E9%BC%A0%E6%A0%87%E6%BB%9A%E8%BD%AE%E6%BB%9A%E5%8A%A8">2. 在PC端，无法响应鼠标滚轮滚动</a></li>
<li><a href="#3-scrollbehavior-%E4%B8%8E-better-scroll-%E4%B8%8D%E5%85%BC%E5%AE%B9">3. scrollBehavior 与 better-scroll 不兼容</a></li>
<li><a href="#4-%E7%82%B9%E5%87%BB%E4%B8%80%E6%AC%A1%E5%A4%9A%E6%AC%A1%E8%A7%A6%E5%8F%91">4. 点击一次多次触发</a></li>
<li><a href="#5-%E5%AE%B9%E5%99%A8%E9%9C%80%E8%A6%81%E5%9B%BA%E5%AE%9A%E9%AB%98%E5%BA%A6">5. 容器需要固定高度</a></li>
<li><a href="#6-%E5%8F%8C%E5%B1%82%E5%B5%8C%E5%A5%97%E9%97%AE%E9%A2%98">6. 双层嵌套问题</a></li>
</ul>
</li>
<li><a href="#vue-router-%E5%A6%82%E4%BD%95%E5%88%B7%E6%96%B0%E5%BD%93%E5%89%8D%E9%A1%B5%E9%9D%A2">vue-router 如何刷新当前页面</a></li>
<li><a href="#vue%E5%8A%A0scoped%E5%90%8E%E5%B0%B1%E6%97%A0%E6%B3%95%E4%BF%AE%E6%94%B9vant%E7%9A%84ui%E7%BB%84%E4%BB%B6%E7%9A%84%E6%A0%B7%E5%BC%8F">vue加scoped后就无法修改vant的UI组件的样式</a></li>
<li><a href="#swiper-%E6%89%8B%E5%8A%A8%E6%BB%91%E5%8A%A8%E5%90%8E%E8%87%AA%E5%8A%A8%E6%BB%91%E5%8A%A8%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98">swiper 手动滑动后，自动滑动失效问题</a></li>
<li><a href="#webpack%E7%9A%84%E5%8A%A8%E6%80%81import">webpack的动态import</a></li>
</ul>
</li>
</ul>

</div>


    
<footer id="fh5co-footer">
  <p></p>
</footer>


    <!-- jQuery -->
<script src="https://lzenghua.github.io/media/scripts/jquery.min.js"></script>
<!-- img lazy load -->
<script src="https://lzenghua.github.io/media/scripts/jquery.lazyload.min.js"></script>
<!-- jQuery Easing -->
<script src="https://lzenghua.github.io/media/scripts/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="https://lzenghua.github.io/media/scripts/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="https://lzenghua.github.io/media/scripts/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="https://lzenghua.github.io/media/scripts/main.js"></script>
<!-- Md5 Min JS -->
<script src="https://lzenghua.github.io/media/scripts/md5.min.js"></script>
<!-- katex -->
<!--<script src="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.js"></script>-->
<!-- highlight -->
<script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>


<script type="application/javascript">
    // 代码高亮
    hljs.initHighlightingOnLoad();

    // img 懒加载
    $(function () {
        $("img.lazy").lazyload({
            effect: "fadeIn",  // 懒加载动画
            threshold: 180  // 在图片距离屏幕180px时提前载入
        });
        // tooltip
        $('[data-toggle="tooltip"]').tooltip();

        // 目录
        $('#tool-toc').click(function () {
            $('.post-toc').toggle();
        });
    });

    
        var allImg = $("img");
        allImg.on("contextmenu", function () {
            return false;
        });
        allImg.on("dragstart", function () {
            return false;
        });
    
</script>




</body>
</html>
